<!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta name="generator" content="ussg" />
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>${title} - ${sitetitle}</title>
		<link rel="icon" type="image/x-icon" href="/static/images/favicon/favicon.ico">
		<meta name="description" content="${description}">
<style>${css}</style>
	</head>
	<body>
		<header>
			<h1><a href="/">${sitename}</a></h1>
			<hr>
			<nav>
				${navbar}
			</nav>
			<hr>
		</header>
		<main>
			<h3 id='articletitle'>${title}</h3>
			<small id="date">${date}</small>
			${mdtext}
			
<form name="comments" id='formcomments' method='POST' action='/cgi-bin/addcomment.cgi'>
	<hr>
	<div><h3>Post a Comment</h3></div>
	<div>
		<input type="text" class='comment-field' name="alias" placeholder="Your Alias"  id="alias" required />
		<input type="hidden" id='texturl'  name="url"/>
		<input type="hidden" id='textdate' name="time"/>
	</div>
	<div>
		<textarea maxlength=500 name="body" placeholder="Enter your comment here (Max 500 words)"  id="comment" required ></textarea>
	</div><div>    
		<button type="button" onclick="tesubmit()"  id="comment-button">Comment</button>
	</div>
</form>
<div id='solution' class='commentslist'></div>
<script src="/static/comments.js"></script>
<script>
	function tesubmit(){
		document.getElementById('texturl').setAttribute('value',window.location.pathname);
		document.getElementById('texturl').value = window.location.pathname;
		document.getElementById('textdate').setAttribute('value',new Date().toString());
		document.getElementById('formcomments').submit();
	}

	function displaycomments(){
		var url = window.location.pathname;
		var commentslist = document.getElementById("solution");
			const current_comments = all_comments.filter(c=>c.url[0]===url)
			if(current_comments.length>0){
					commentslist.insertAdjacentHTML("beforeend","<h3>Comments ðŸ‘‡</h3>");
					current_comments.forEach(value => {
									var txt = `
										   <div>
										   <b>${value.alias[0]}</b>&nbsp;
										   <br>
										   <div>
										   ${value.body[0]}				</div>
										   </div>`;
									commentslist.insertAdjacentHTML("beforeend",txt);
						})
				}
		}
window.onload = displaycomments();
</script>
</main>
<footer>
	${footer} <br> <a href="/atom.xml">Subscribe via Atom</a>
</footer>
</body>
</html>
